<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [fetchmail-devel] [Patch #3116] Allow selection of LAST envelope	header
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fetchmail-devel/2011-January/index.html" >
   <LINK REL="made" HREF="mailto:fetchmail-devel%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-devel%5D%20%5BPatch%20%233116%5D%20Allow%20selection%20of%20LAST%20envelope%0A%09header&In-Reply-To=%3C201101090229.p092T651007202%40unicorn.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001459.html">
   <LINK REL="Next"  HREF="001461.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[fetchmail-devel] [Patch #3116] Allow selection of LAST envelope	header</H1>
    <B>admin at berlios.de</B> 
    <A HREF="mailto:fetchmail-devel%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-devel%5D%20%5BPatch%20%233116%5D%20Allow%20selection%20of%20LAST%20envelope%0A%09header&In-Reply-To=%3C201101090229.p092T651007202%40unicorn.berlios.de%3E"
       TITLE="[fetchmail-devel] [Patch #3116] Allow selection of LAST envelope	header">admin at berlios.de
       </A><BR>
    <I>Sun Jan  9 03:29:06 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001459.html">[fetchmail-devel] [Patch #3116] Allow selection of LAST envelope	header
</A></li>
        <LI>Next message: <A HREF="001461.html">[fetchmail-devel] New Chinese (simplified) PO file for 'fetchmail'	(version 6.3.19-pre1)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1460">[ date ]</a>
              <a href="thread.html#1460">[ thread ]</a>
              <a href="subject.html#1460">[ subject ]</a>
              <a href="author.html#1460">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Patch #3116 has been updated. 

Project: fetchmail
Category: None
Status: Open
Submitted by: mskala
Assigned to : none
Summary: Allow selection of LAST envelope header

Follow-Ups:

Date: 2011-Jan-08 20:29
By: mskala

Comment:
My ISP unconditionally adds an X-Envelope-To: header at the end of the message header block.  Sometimes a message comes in which already has an X-Envelope-To: header, generally with an address my sendmail will think is non-local and reject; messages that come through the XeTeX development mailing list often fit this description, because for whatever reason they arrive containing their own X-Envelope-To: headers pointing at the list instead of at me.

If I just tell Fetchmail to use X-Envelope-To:, it reads the first one, which is the one added by my ISP in most cases but the one that came in with the message for the few messages that already have them.  When the message comes with an X-Envelope-To header and Fetchmail reads it, it can't deliver the message properly.  Fetchmail would allow me to skip a constant number of headers - so I could tell it to skip 1 and then it would always read the second X-Envelope-To: header - but in that case it would fail on the large majority of messages where my ISP's header is the only one.  What I would really like would be to read the LAST X-Envelope-To: header, regardless of how many (if any) must be skipped to do that.

This patch (against fetchmail-6.3.19) accomplishes that.  If I set the &quot;skip&quot; value to -1, then Fetchmail will use the LAST envelope header, which (in my case) is always the one added by my ISP.  For values of skip other than -1, it preserves the old behaviour.  Since -1 was formerly an invalid setting for skip (though not tested for), it shouldn't disturb existing correct behaviour.
-------------------------------------------------------

-------------------------------------------------------
For more info, visit:

<A HREF="http://developer.berlios.de/patch/?func=detailpatch&amp;patch_id=3116&amp;group_id=1824">http://developer.berlios.de/patch/?func=detailpatch&amp;patch_id=3116&amp;group_id=1824</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001459.html">[fetchmail-devel] [Patch #3116] Allow selection of LAST envelope	header
</A></li>
	<LI>Next message: <A HREF="001461.html">[fetchmail-devel] New Chinese (simplified) PO file for 'fetchmail'	(version 6.3.19-pre1)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1460">[ date ]</a>
              <a href="thread.html#1460">[ thread ]</a>
              <a href="subject.html#1460">[ subject ]</a>
              <a href="author.html#1460">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fetchmail-devel">More information about the fetchmail-devel
mailing list</a><br>
</body></html>
