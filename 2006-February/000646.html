<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [fetchmail-devel] Re: [fetchmail-users] Incorrect header line and lost mails
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fetchmail-devel/2006-February/index.html" >
   <LINK REL="made" HREF="mailto:fetchmail-devel%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-devel%5D%20Re%3A%20%5Bfetchmail-users%5D%20Incorrect%20header%20line%0A%20and%20lost%20mails&In-Reply-To=%3C43F1DF62.4050109%40wowcompany.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000645.html">
   <LINK REL="Next"  HREF="000648.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[fetchmail-devel] Re: [fetchmail-users] Incorrect header line and lost mails</H1>
    <B>Frederic Marchal</B> 
    <A HREF="mailto:fetchmail-devel%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-devel%5D%20Re%3A%20%5Bfetchmail-users%5D%20Incorrect%20header%20line%0A%20and%20lost%20mails&In-Reply-To=%3C43F1DF62.4050109%40wowcompany.com%3E"
       TITLE="[fetchmail-devel] Re: [fetchmail-users] Incorrect header line and lost mails">frederic.marchal at wowcompany.com
       </A><BR>
    <I>Tue Feb 14 14:47:14 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000645.html">[fetchmail-devel] Re: [fetchmail-users] Incorrect header line and lost mails
</A></li>
        <LI>Next message: <A HREF="000648.html">[fetchmail-devel] Re: [fetchmail-users] Incorrect header line and lost mails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#646">[ date ]</a>
              <a href="thread.html#646">[ thread ]</a>
              <a href="subject.html#646">[ subject ]</a>
              <a href="author.html#646">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Rob MacGregor wrote:
&gt;<i> On 2/14/06, Matthias Andree &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-devel">matthias.andree at gmx.de</A>&gt; wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> The bigger concern is that fetchmail shouldn't be emitting headers it
</I>&gt;&gt;<i> knows are broken, so that the next hop (the MTA or MDA) does not get
</I>&gt;&gt;<i> confused. I wonder if fetchmail should prefix the broken lines with
</I>&gt;&gt;<i> X-Fetchmail-Escaped-Broken-Header: or something similar.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> My 0.02$CURRENCY - when fetchmail finds a mail such as this it should
</I>&gt;<i> create a new mail, addressed to the postmaster address, with the
</I>&gt;<i> illegal email as a text/plain attachment.
</I>&gt;<i>
</I>&gt;<i> If you're feeling kind, insert a blank line before the offending
</I>&gt;<i> illegal header and include that altered version as a message/rfc822
</I>&gt;<i> attachment (but still have the text/plain attachment)
</I>&gt;<i>
</I>&gt;<i> There's no point in passing on the known broken email as is, and
</I>&gt;<i> simply &quot;fixing&quot; it may result in more problems.  At least if the
</I>&gt;<i> postmaster gets it as an attachment then they can decide how to handle
</I>&gt;<i> it.
</I>&gt;<i>
</I>&gt;<i> Personally, I'm curious to know what mail client is producing such
</I>&gt;<i> borken emails, and what MTAs are passing them on.
</I>&gt;<i>
</I>&gt;<i>   
</I>This thread started in fetchmail-user.

My problem is that at least one good e-mail (I mean one I would have 
want to receive) had an invalid header line and was deleted by 
fetchmail. The mail was sent by hotmail  with a very long TO header (it 
is not rfc822 compliant) and further wrapped at some point. As a result, 
the header contained one line without colon and not starting with a 
blank character. The whole mail was simply deleted by fetchmail although 
it could have been delivered.

I believe it is not fetchmail's job to enforce rfc822 that way. It 
should be left to a program dedicated to that task or, at least, it 
should not be the default option. It would be a good idea to tag the 
mail with a specific header though. It would make it easier to filter 
out with a program such as procmail. I wouldn't divert the mail to the 
postmaster either. It is likely that a busy postmaster will throw it 
away without looking at it if he is not the obvious recipient.

The drawback is that if the mail is really junk, it will be downloaded 
and processed until it encounters the spam filter. It is a problem for a 
dialup link or even a DSL line with a low download limit. That's a 
reason to keep it an option the user can set.

Frederic



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000645.html">[fetchmail-devel] Re: [fetchmail-users] Incorrect header line and lost mails
</A></li>
	<LI>Next message: <A HREF="000648.html">[fetchmail-devel] Re: [fetchmail-users] Incorrect header line and lost mails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#646">[ date ]</a>
              <a href="thread.html#646">[ thread ]</a>
              <a href="subject.html#646">[ subject ]</a>
              <a href="author.html#646">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fetchmail-devel">More information about the fetchmail-devel
mailing list</a><br>
</body></html>
