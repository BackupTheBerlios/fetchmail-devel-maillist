<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [fetchmail-devel] Add feature: add header to messages?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fetchmail-devel/2011-November/index.html" >
   <LINK REL="made" HREF="mailto:fetchmail-devel%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-devel%5D%20Add%20feature%3A%20add%20header%20to%20messages%3F&In-Reply-To=%3C4EC26935.3050806%40kamens.us%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001530.html">
   <LINK REL="Next"  HREF="001533.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[fetchmail-devel] Add feature: add header to messages?</H1>
    <B>Jonathan Kamens</B> 
    <A HREF="mailto:fetchmail-devel%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-devel%5D%20Add%20feature%3A%20add%20header%20to%20messages%3F&In-Reply-To=%3C4EC26935.3050806%40kamens.us%3E"
       TITLE="[fetchmail-devel] Add feature: add header to messages?">jik at kamens.us
       </A><BR>
    <I>Tue Nov 15 14:29:25 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001530.html">[fetchmail-devel] New Japanese PO file for 'fetchmail' (version	6.3.20-rc3)
</A></li>
        <LI>Next message: <A HREF="001533.html">[fetchmail-devel] Add feature: add header to messages?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1531">[ date ]</a>
              <a href="thread.html#1531">[ thread ]</a>
              <a href="subject.html#1531">[ subject ]</a>
              <a href="author.html#1531">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello everyone,

We've run into a fetchmail use case which doesn't seem to be easily 
solved with existing functionality, and I'm writing to ask (a) are we 
missing something and (b) if not, would the fetchmail maintainers 
consider accepting a patch to solve the problem?

In a nutshell, our custom MDA wants to see the recipient addresses of 
incoming messages; it's not there anywhere; and we can't figure out any 
scalable way to get fetchmail to provide it to the MDA.

Our .fetchmailrc fetches messages from multiple mailboxes with different 
addresses. These messages are fed into our proprietary application using 
a custom MDA script that we wrote. Our application does different things 
based on which mailbox each message is from.

The mailboxes receiving these messages are often BCC'd, which means that 
the recipient address doesn't appear in To or CC. Furthermore, the mail 
servers we're downloading from unfortunately don't insert 
X-Delivered-To, or Received lines showing the recipient address, or 
anything like that. In short, there's no way to tell from looking at the 
message fed into the MDA what address it was sent to.

We could hard-code a command-line option for the custom MDA command 
identifying the mailbox, but as far as I can tell, that fails if you've 
got more than one account in the .fetchmailrc file, because I don't 
believe it's possible to specify different MDA settings for different 
accounts (am I wrong about that?).

The idea I've come up with is to add a new &quot;id&quot; per-mailbox 
configuration setting to allow the user to specify an arbitrary 
identifier for the mailbox, and a &quot;%I&quot; command-line escape for the MDA 
settings to allow the identifier for the account from which the current 
message originated to be passed into the MDA.

So, my questions are (a) is there a way I'm missing to solve this 
problem, (b) if not, and we implemented the functionality I described, 
would the maintainers take a patch, and (c) if not, is there some other 
way to solve this problem that the maintainers would suggest we 
implement instead?

Thanks,

Jonathan Kamens

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/fetchmail-devel/attachments/20111115/edfee803/attachment.html">https://lists.berlios.de/pipermail/fetchmail-devel/attachments/20111115/edfee803/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001530.html">[fetchmail-devel] New Japanese PO file for 'fetchmail' (version	6.3.20-rc3)
</A></li>
	<LI>Next message: <A HREF="001533.html">[fetchmail-devel] Add feature: add header to messages?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1531">[ date ]</a>
              <a href="thread.html#1531">[ thread ]</a>
              <a href="subject.html#1531">[ subject ]</a>
              <a href="author.html#1531">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fetchmail-devel">More information about the fetchmail-devel
mailing list</a><br>
</body></html>
