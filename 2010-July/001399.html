<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [fetchmail-devel] timeout not working for TLS
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fetchmail-devel/2010-July/index.html" >
   <LINK REL="made" HREF="mailto:fetchmail-devel%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-devel%5D%20timeout%20not%20working%20for%20TLS&In-Reply-To=%3C201007271521.16789.thomas.jarosch%40intra2net.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="001400.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[fetchmail-devel] timeout not working for TLS</H1>
    <B>Thomas Jarosch</B> 
    <A HREF="mailto:fetchmail-devel%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-devel%5D%20timeout%20not%20working%20for%20TLS&In-Reply-To=%3C201007271521.16789.thomas.jarosch%40intra2net.com%3E"
       TITLE="[fetchmail-devel] timeout not working for TLS">thomas.jarosch at intra2net.com
       </A><BR>
    <I>Tue Jul 27 15:21:16 CEST 2010</I>
    <P><UL>
        
        <LI>Next message: <A HREF="001400.html">[fetchmail-devel] timeout not working for TLS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1399">[ date ]</a>
              <a href="thread.html#1399">[ thread ]</a>
              <a href="subject.html#1399">[ subject ]</a>
              <a href="author.html#1399">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I recently had two cases of hanging fetchmail processes
during TLS negotiation with two different servers.

The config looks like this:
-----------------
defaults proto pop3
set logfile /var/log/fetchmail
set postmaster &quot;postmaster&quot;
set showdots
poll &quot;server&quot; timeout 90 user &quot;USER&quot; password &quot;PASS&quot; to &quot;something&quot; fetchall
...
poll &quot;server&quot; timeout 90 user &quot;USERx&quot; password &quot;PASS&quot; to &quot;otherX&quot; fetchall
-----------------


I was able to grab a log of a stalled fetchmail process:
----------------------------------------------
fetchmail: 6.3.17 querying pop.1und1.com (protocol POP3) at Sat, 24 Jul 2010 
04:57:01 +0200 (CEST): poll started
fetchmail: Trying to connect to 212.227.15.161/110...connected.
fetchmail: POP3&lt; +OK POP server ready H mimap4
fetchmail: POP3&gt; CAPA
fetchmail: POP3&lt; +OK Capability list follows
fetchmail: POP3&lt; TOP
fetchmail: POP3&lt; USER
fetchmail: POP3&lt; UIDL
fetchmail: POP3&lt; STLS
fetchmail: POP3&lt; IMPLEMENTATION trinity
fetchmail: POP3&lt; .
fetchmail: POP3&gt; STLS
fetchmail: POP3&lt; +OK Begin TLS negotiation
---------- fetchmail hangs ------------------

Any idea why the timeout of 90 seconds is not triggered?

Maybe it's stuck in the openssl code and the timeout is not working?
The openssl version in use is 0.9.8o.

Best regards,
Thomas Jarosch

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="001400.html">[fetchmail-devel] timeout not working for TLS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1399">[ date ]</a>
              <a href="thread.html#1399">[ thread ]</a>
              <a href="subject.html#1399">[ subject ]</a>
              <a href="author.html#1399">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fetchmail-devel">More information about the fetchmail-devel
mailing list</a><br>
</body></html>
